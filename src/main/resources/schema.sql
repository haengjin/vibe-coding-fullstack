CREATE TABLE IF NOT EXISTS POSTS (
    NO BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR(200) NOT NULL,
    CONTENT CLOB NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT NULL,
    VIEWS INT NOT NULL DEFAULT 0,
    CONSTRAINT CHK_POSTS_CONTENT_SIZE CHECK (LENGTH(CONTENT) <= 10485760)
);

CREATE TABLE IF NOT EXISTS POST_TAGS (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    POST_NO BIGINT NOT NULL,
    TAG_NAME VARCHAR(50) NOT NULL,
    CONSTRAINT FK_POST_TAGS_POST_NO
        FOREIGN KEY (POST_NO) REFERENCES POSTS (NO)
);
